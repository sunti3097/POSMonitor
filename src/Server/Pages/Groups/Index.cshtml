@page "/Groups"
@model POSMonitor.Server.Pages.Groups.IndexModel
@{
    ViewData["Title"] = "‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå";
}

<div class="page-header">
    <h2 class="page-subtitle">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</h2>
    <p class="page-description">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏∏‡πà‡∏° POS ‡∏ï‡∏≤‡∏°‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏Ç‡∏≤</p>
</div>

<div class="panel">
    <div class="panel-header">
        <h3 class="panel-title">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</h3>
    </div>
    <div class="panel-body">
        <form method="post" asp-page-handler="Create" class="form-inline">
            <div class="form-group">
                <label>‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°</label>
                <input type="text" asp-for="NewGroupName" class="form-control" placeholder="‡πÄ‡∏ä‡πà‡∏ô Discovery Retail" required />
            </div>
            <div class="form-group">
                <label>‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó</label>
                <input type="text" asp-for="NewGroupCompanyCode" class="form-control" placeholder="‡πÄ‡∏ä‡πà‡∏ô 204" />
            </div>
            <div class="form-group">
                <label>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label>
                <input type="text" asp-for="NewGroupDescription" class="form-control" placeholder="‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°" />
            </div>
            <button type="submit" class="btn btn-primary">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°</button>
        </form>
    </div>
</div>

<div class="panel">
    <div class="panel-header">
        <h3 class="panel-title">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (@Model.Groups.Count)</h3>
    </div>
    <div class="panel-body">
        @if (!Model.Groups.Any())
        {
            <div class="empty-state">
                <div class="empty-state-icon">üìÅ</div>
                <div class="empty-state-title">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏•‡∏∏‡πà‡∏°</div>
                <p>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô</p>
            </div>
        }
        else
        {
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°</th>
                            <th>‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó</th>
                            <th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
                            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</th>
                            <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                            <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var group in Model.Groups)
                        {
                            <tr>
                                <td>
                                    <div class="cell-title">@group.Name</div>
                                </td>
                                <td>
                                    @if (!string.IsNullOrEmpty(group.CompanyCode))
                                    {
                                        <span class="badge badge-company">@group.CompanyCode</span>
                                    }
                                    else
                                    {
                                        <span class="text-muted">-</span>
                                    }
                                </td>
                                <td>@group.Description</td>
                                <td>@group.DeviceCount ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</td>
                                <td>
                                    <div class="status-summary">
                                        @if (group.OnlineCount > 0)
                                        {
                                            <span class="status-pill online">@group.OnlineCount Online</span>
                                        }
                                        @if (group.OfflineCount > 0)
                                        {
                                            <span class="status-pill offline">@group.OfflineCount Offline</span>
                                        }
                                    </div>
                                </td>
                                <td>
                                    <form method="post" asp-page-handler="Delete" asp-route-id="@group.Id" 
                                          onsubmit="return confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ô‡∏µ‡πâ?');" style="display:inline">
                                        <button type="submit" class="btn btn-danger btn-sm">‡∏•‡∏ö</button>
                                    </form>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
    </div>
</div>

<style>
.page-header{margin-bottom:24px}
.page-subtitle{font-size:1.25rem;font-weight:700;color:var(--text);margin-bottom:4px}
.page-description{color:var(--text-muted);font-size:0.9rem}
.panel{background:var(--surface);border:1px solid var(--border);border-radius:12px;margin-bottom:20px}
.panel-header{padding:16px 20px;border-bottom:1px solid var(--border)}
.panel-title{font-size:1rem;font-weight:600;color:var(--text)}
.panel-body{padding:20px}
.form-inline{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}
.form-group{display:flex;flex-direction:column;gap:6px}
.form-group label{font-size:0.8rem;font-weight:600;color:var(--text-muted)}
.form-control{padding:10px 14px;border:1px solid var(--border);border-radius:8px;background:var(--bg);font-size:0.9rem;color:var(--text);min-width:200px}
.btn{padding:10px 20px;border-radius:8px;font-size:0.9rem;font-weight:600;cursor:pointer;border:none;transition:all .2s}
.btn-primary{background:var(--purple-600);color:white}
.btn-primary:hover{background:var(--purple-700)}
.btn-danger{background:var(--danger);color:white}
.btn-danger:hover{background:#dc2626}
.btn-sm{padding:6px 12px;font-size:0.8rem}
.data-table{width:100%;border-collapse:collapse}
.data-table th{padding:12px 16px;text-align:left;font-size:0.75rem;font-weight:700;text-transform:uppercase;letter-spacing:0.05em;color:var(--text-muted);background:var(--purple-50);border-bottom:1px solid var(--border)}
.data-table td{padding:14px 16px;border-bottom:1px solid var(--border);font-size:0.9rem;color:var(--text)}
.data-table tbody tr:hover{background:var(--purple-50)}
.cell-title{font-weight:600;color:var(--text)}
.badge{display:inline-block;padding:4px 10px;border-radius:6px;font-size:0.75rem;font-weight:600}
.badge-company{background:var(--purple-100);color:var(--purple-700)}
.status-summary{display:flex;gap:8px;flex-wrap:wrap}
.status-pill{padding:4px 10px;border-radius:20px;font-size:0.7rem;font-weight:600}
.status-pill.online{background:#dcfce7;color:#166534}
.status-pill.offline{background:#fee2e2;color:#991b1b}
.text-muted{color:var(--text-muted)}
.empty-state{text-align:center;padding:40px 20px;color:var(--text-muted)}
.empty-state-icon{font-size:2.5rem;margin-bottom:12px}
.empty-state-title{font-size:1rem;font-weight:600;color:var(--text);margin-bottom:4px}
.table-responsive{overflow-x:auto}
</style>
